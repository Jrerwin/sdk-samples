<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 16.0px 0.0px; font: 16.7px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p2 {margin: 0.0px 0.0px 16.0px 0.0px; font: 14.7px Arial; color: #094696; -webkit-text-stroke: #094696; background-color: #ffffff}
    p.p3 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p4 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.7px Arial; color: #094696; -webkit-text-stroke: #094696; background-color: #ffffff}
    p.p5 {margin: 0.0px 16.0px 16.0px 40.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p6 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000}
    p.p7 {margin: 0.0px 0.0px 16.0px 0.0px; font: 12.0px Arial; color: #094696; -webkit-text-stroke: #094696; background-color: #ffffff}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px 'Courier New'; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p9 {margin: 0.0px 16.0px 16.0px 40.0px; text-indent: -24.0px; font: 9.3px 'Times New Roman'; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p10 {margin: 0.0px 0.0px 0.0px 40.0px; font: 13.3px 'Courier New'; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p11 {margin: 0.0px 16.0px 0.0px 40.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.3px 'Courier New'; color: #094696; -webkit-text-stroke: #094696; background-color: #ffffff}
    p.p13 {margin: 0.0px 0.0px 16.0px 40.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p14 {margin: 0.0px 16.0px 16.0px 40.0px; text-indent: -24.0px; font: 12.0px Arial; color: #094696; -webkit-text-stroke: #094696; background-color: #ffffff}
    p.p15 {margin: 0.0px 32.0px 16.0px 80.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p16 {margin: 0.0px 32.0px 16.0px 120.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p17 {margin: 0.0px 32.0px 16.0px 160.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p18 {margin: 0.0px 32.0px 0.0px 80.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p19 {margin: 0.0px 48.0px 0.0px 120.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p20 {margin: 0.0px 16.0px 0.0px 80.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p21 {margin: 0.0px 0.0px 16.0px 48.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p22 {margin: 0.0px 0.0px 16.0px 48.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p23 {margin: 0.0px 0.0px 16.0px 96.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p24 {margin: 0.0px 0.0px 16.0px 96.0px; text-indent: 48.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p25 {margin: 0.0px 0.0px 16.0px 96.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p26 {margin: 0.0px 0.0px 16.0px 48.0px; text-indent: 48.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p27 {margin: 0.0px 0.0px 16.0px 144.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p28 {margin: 0.0px 0.0px 16.0px 48.0px; text-indent: 24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p29 {margin: 0.0px 0.0px 16.0px 144.0px; text-indent: -24.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p30 {margin: 0.0px 16.0px 0.0px 40.0px; text-indent: -24.0px; font: 9.3px 'Times New Roman'; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p31 {margin: 0.0px 0.0px 16.0px 80.0px; font: 12.0px Arial; color: #000000; -webkit-text-stroke: #000000; background-color: #ffffff}
    p.p32 {margin: 0.0px 0.0px 0.0px 0.0px; font: 16.0px Helvetica; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none}
    span.s2 {font: 13.3px 'Lucida Grande'; font-kerning: none}
    span.s3 {font: 9.3px 'Times New Roman'; font-kerning: none}
    span.s4 {font-kerning: none; background-color: #ffffff}
    span.s5 {text-decoration: underline ; font-kerning: none; color: #094696; -webkit-text-stroke: 0px #094696}
    span.s6 {font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s7 {font: 12.0px Arial; text-decoration: underline ; font-kerning: none; color: #094696; -webkit-text-stroke: 0px #094696}
    span.s8 {font: 12.0px Arial; font-kerning: none}
    span.s9 {font: 13.3px 'Courier New'; text-decoration: underline ; font-kerning: none; color: #094696; -webkit-text-stroke: 0px #094696}
    span.s10 {font: 13.3px 'Lucida Grande'; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s11 {font: 9.3px 'Times New Roman'; font-kerning: none; color: #000000; -webkit-text-stroke: 0px #000000}
    span.s12 {font: 12.0px 'Lucida Grande'; font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1"><b>Cradlepoint NCOS SDK 3.0 Application Developers Guide</b></span></p>
<p class="p2"><span class="s1"><b>Introduction</b></span></p>
<p class="p3"><span class="s1">Cradlepoint’s NetCloud OS (NCOS) SDK provides the ability to customize the functionality of Cradlepoint devices with applications written in Python. Python applications written with the SDK are securely downloaded to the device and enabled using NetCloud Manager (NCM). Cradlepoint’s SDK allows for extending and enhancing the functionality of Cradlepoint devices, FOG computing, and managing IoT devices.</span></p>
<p class="p4"><span class="s1"><b>Supported Functionality</b></span></p>
<p class="p3"><span class="s1">For the scope of this document, NetCloud OS (NCOS) Apps are limited to the non-privileged Python scripts. Supported functionality includes the following:</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Standard TCP/UDP/SSL socket servers function on ports higher than 1024.</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Standard TCP/UDP/SSL socket client to other devices (or the device as 127.0.0.1/localhost).</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Access to serial ports via the PySerial module, including native and USB-serial ports.</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Ability to PING external devices.</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">UI Extensibility (i.e. Hot Spot splash page or other UI WEB pages)</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Access to the NCOS API (aka: status and control tree data).</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">USB Memory device file access.</span></p>
<p class="p4"><span class="s1"><b>What is not Supported</b></span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Any form of natively-compiled or kernel-linked code (.pyc, .so files)</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Any function requiring privileged (or root) permissions.</span></p>
<p class="p4"><span class="s1"><b>Application Support</b></span></p>
<p class="p6"><span class="s4">Please refer to the <a href="https://0dfd616c236cc1a1fdbd-814cf18bbbf4820df624f7c2a7832ea4.ssl.cf2.rackcdn.com/SDK_Support_Statement_Version_1.pdf"><span class="s5">SDK Support Statement</span></a>.</span><span class="s1"><br>
<br>
</span><span class="s4">Cradlepoint publishes and supports the SDK toolkit for customers and partners to build their own applications. Cradlepoint neither develops any custom SDK applications, nor supports SDK applications developed by the customer or partner. It is the sole responsibility of customers and/or partners to develop, test and deploy any custom SDK applications onto Cradlepoint endpoints. Cradlepoint does not fix any issue or guarantee that these SDK applications will continue to work on newer releases of NCOS.</span><span class="s1"><br>
<br>
</span><span class="s4">Cradlepoint does not develop, maintain, or support NCOS SDK applications. Applications are the sole responsibility of the developer.</span><span class="s1"><br>
<br>
</span><span class="s4">NCOS SDK Applications can introduce security and other potential issues when not carefully engineered. Test your code thoroughly before deploying it to production devices.</span></p>
<p class="p4"><span class="s1"><b>Application Development</b></span></p>
<p class="p3"><span class="s1">For ease of development and debugging, an application can be directly installed into a device that has been placed into Developer Mode. Once the application is fully debugged and ready for deployment, it can be installed via NCM at the group level.</span></p>
<p class="p4"><span class="s1"><b>SDK Toolset</b></span></p>
<p class="p6"><span class="s4">Cradlepoint has a simplified SDK, written in Python, that builds and creates an app package. The SDK, along with sample applications, is located in the <a href="http://github.com/cradlepoint/sdk-samples/releases"><span class="s5">Cradlepoint SDK GitHub repository</span></a>.</span><span class="s1"><br>
<br>
</span><span class="s4">For app development, the SDK is used to install, start, stop, uninstall, and check the status of an application in a locally-connected development device. The application package is the same for local debugging or for uploading to NCM for production deployment. Application development can be done on Linux, OS X, and Windows operating systems with the same SDK.</span><span class="s1"><br>
<br>
</span><span class="s4">This document is specifically written for SDK version 3.0 and above.</span></p>
<p class="p4"><span class="s1"><b>Developer Community</b></span></p>
<p class="p7"><span class="s6">Cradlepoint has a <a href="http://dev.cradlepoint.com/"><span class="s5">Developer Community Portal</span></a>. </span></p>
<p class="p4"><span class="s1"><b>Cradlepoint Knowledge Base</b></span></p>
<p class="p3"><span class="s1">Our <a href="http://customer.cradlepoint.com/s/"><span class="s7">Customer Community</span></a> has articles related to the SDK, as well as forums to leverage knowledge, share, and collaborate with other developers. This forum is actively monitored by Cradlepoint to answer your questions.</span></p>
<p class="p4"><span class="s1"><b>NCOS Python Environment</b></span></p>
<p class="p6"><span class="s4">NCOS application are written in Python. However, for storage space and security purposes, the NCOS Python environment is a subset of a typical Python installation on a computer. A list of the installed Python modules in an NCOS device is available by installing and running the sample app named “python_module_list” that is included with the SDK sample apps. The “python_module_list” application writes the names of the installed Python modules on a device to that device’s log.</span><span class="s1"><br>
<br>
</span><span class="s4">New Python files can be added to your application, but their dependencies must also adhere to the NCOS Python environment. These new Python files/modules can be copied to the main application directory or can be installed using pip. If pip is used, any 'egg' or 'dist' directories can be deleted. They are not required for functionality and will just use up memory unnecessarily when installed into the NCOS device.</span><span class="s1"><br>
<br>
</span><span class="s4">Example pip command:</span></p>
<p class="p8"><span class="s1">pip(3) install --ignore-install --target=&lt;path to application directory&gt; &lt;module name&gt;</span></p>
<p class="p6"><span class="s1"><br>
</span><span class="s4"><i>Note: Use pip on Windows and pip3 on Linux or OS X.</i></span><span class="s1"><br>
</span><span class="s4"> </span></p>
<p class="p2"><span class="s1"><b>Environment</b></span></p>
<p class="p3"><span class="s1">Use the following sections to set up your development environment to work with the Cradlepoint SDK.</span></p>
<p class="p4"><span class="s1"><b>Computer Setup Instructions</b></span></p>
<p class="p3"><span class="s1">Download the SDK and sample apps from <a href="https://github.com/cradlepoint/sdk-samples"><span class="s7">https://github.com/cradlepoint/sdk-samples</span></a>. Below are the setup instructions for:</span></p>
<p class="p9"><span class="s2">·</span><span class="s1">       <a href="http://dev.cradlepoint.com/s/article/NCOS-SDK-v2-0-Application-Development-Guide#Linux"><span class="s7">Linux</span></a></span><span class="s8"> </span></p>
<p class="p9"><span class="s2">·</span><span class="s1">       <a href="http://dev.cradlepoint.com/s/article/NCOS-SDK-v2-0-Application-Development-Guide#Mac"><span class="s7">OS X</span></a></span></p>
<p class="p9"><span class="s2">·</span><span class="s1">       <a href="http://dev.cradlepoint.com/s/article/NCOS-SDK-v2-0-Application-Development-Guide#Windows"><span class="s7">Windows</span></a></span></p>
<p class="p3"><span class="s1"><i>Note: Command line commands must be performed in the order they appear.</i></span></p>
<p class="p7"><span class="s1"><b>Linux</b></span></p>
<p class="p5"><span class="s1">1.</span><span class="s3">     </span><span class="s1">Install Python 3.7 or newer from <a href="http://www.python.org/"><span class="s7">python.org</span></a>.</span></p>
<p class="p5"><span class="s1">2.</span><span class="s3">     </span><span class="s1">Add Linux development libraries by using the following commands:</span></p>
<p class="p10"><span class="s1">sudo apt-get install libffi-dev</span></p>
<p class="p10"><span class="s1">sudo apt-get install libssl-dev</span></p>
<p class="p10"><span class="s1">sudo apt-get install sshpass</span></p>
<p class="p11"><span class="s1">3.</span><span class="s3">     </span><span class="s1">Install Python libraries by using the following commands.</span></p>
<p class="p10"><span class="s1">sudo apt-get install python3-pip</span></p>
<p class="p10"><span class="s1">pip3 install requests</span></p>
<p class="p10"><span class="s1">pip3 install pyopenssl</span></p>
<p class="p10"><span class="s1">pip3 install cryptography</span></p>
<p class="p3"><span class="s1"><b>Useful tools</b></span></p>
<p class="p7"><span class="s6">PyCharm (community version is free): <a href="https://www.jetbrains.com/pycharm/download/#section=linux"><span class="s5">https://www.jetbrains.com/pycharm/download/#section=linux</span></a>.</span></p>
<p class="p7"><span class="s1"><b>Mac OS X</b></span></p>
<p class="p5"><span class="s1">1.</span><span class="s3">     </span><span class="s1">Install Python 3.7 or newer from <a href="http://www.python.org/"><span class="s7">python.org</span></a>.</span></p>
<p class="p5"><span class="s1">2.</span><span class="s3">     </span><span class="s1">Install HomeBrew for package updates by using the following commands:</span></p>
<p class="p12"><span class="s6">/usr/bin/ruby -e "$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install"><span class="s9">https://raw.githubusercontent.com/Homebrew/install/master/install</span></a>)”</span></p>
<p class="p5"><span class="s1">3.</span><span class="s3">     </span><span class="s1">Install these required libraries by using the following commands:</span></p>
<p class="p10"><span class="s1">brew install openssl</span></p>
<p class="p10"><span class="s1">brew install hudochenkov/sshpass/sshpass</span></p>
<p class="p11"><span class="s1">4.</span><span class="s3">     </span><span class="s1">Install the Python libraries by using the following commands:</span></p>
<p class="p10"><span class="s1">pip3 install -U pip</span></p>
<p class="p10"><span class="s1">pip3 install requests</span></p>
<p class="p10"><span class="s1">pip3 install pyopenssl</span></p>
<p class="p10"><span class="s1">pip3 install cryptography</span></p>
<p class="p13"><span class="s1"><b>Useful tools</b></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       </span><span class="s6">PyCharm (community version is free): <a href="https://www.jetbrains.com/pycharm/download/#section=macOS"><span class="s5">https://www.jetbrains.com/pycharm/download/#section=macOS</span></a>.</span></p>
<p class="p7"><span class="s1"><b>Windows</b></span></p>
<p class="p5"><span class="s1">1.</span><span class="s3">     </span><span class="s1">Install Python 3.7 or newer from <a href="https://www.python.org/downloads/windows/"><span class="s7">https://www.python.org/downloads/windows/</span></a>.</span></p>
<p class="p5"><span class="s1">2.</span><span class="s3">     </span><span class="s1">The SDK requires OpenSSL tools to generate digital signatures. Go to <a href="https://slproweb.com/products/Win32OpenSSL.html"><span class="s7">https://slproweb.com/products/Win32OpenSSL.html</span></a> and download the 'Light' version based on your machine (i.e. Win64 or Win32). Run the executable after it is downloaded to install OpenSSL.</span></p>
<p class="p5"><span class="s1">3.</span><span class="s3">     </span><span class="s1">Open a terminal window and use the following commands to install the Python libraries.</span></p>
<p class="p10"><span class="s1">python -m pip install -U pip</span></p>
<p class="p10"><span class="s1">python -m pip install pyserial</span></p>
<p class="p10"><span class="s1">python -m pip install requests</span></p>
<p class="p10"><span class="s1">python -m pip install pyopenssl</span></p>
<p class="p13"><span class="s1"><b>Useful tools</b></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       </span><span class="s6">Putty: <a href="http://www.putty.org/"><span class="s5">http://www.putty.org/</span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       </span><span class="s6">PyCharm (community version is free): <a href="https://www.jetbrains.com/pycharm/download/#section=windows"><span class="s5">https://www.jetbrains.com/pycharm/download/#section=windows</span></a>.</span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       </span><span class="s6">7-zip: <a href="http://www.7-zip.org/"><span class="s5">http://www.7-zip.org/</span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       </span><span class="s6">MarkdownPad: <a href="http://markdownpad.com/"><span class="s5">http://markdownpad.com/</span></a></span></p>
<p class="p2"><span class="s1"><b>Development</b></span></p>
<p class="p3"><span class="s1">Use the following sections to learn about how Cradlepoint SDK apps are structured and how to build and debug your own SDK app.</span></p>
<p class="p4"><span class="s1"><b>NCOS SDK Directory Structure</b></span></p>
<p class="p3"><span class="s1">Below is the directory structure for the SDK and sample applications. The <b>BOLD </b>items are modified or created by the developer. The other files are used by the SDK or are referenced by the other files.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1">sdk-samples-master (directory)</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>app_template_csclient</b> (directory for the application)</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1">tools (directory)</span></p>
<p class="p16"><span class="s2">·</span><span class="s3">       </span><span class="s1">bin (directory)</span></p>
<p class="p17"><span class="s2">·</span><span class="s3">       </span><span class="s1">package_application.py - Used by SDK.</span></p>
<p class="p17"><span class="s2">·</span><span class="s3">       </span><span class="s1">validate_application.py - Used by SDK.</span></p>
<p class="p17"><span class="s2">·</span><span class="s3">       </span><span class="s1">pscp.exe - An executable use on Windows by the SDK.</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>sdk_setting.ini</b> - Used by the SDK and contains the settings for building the app and connecting to the local NCOS device.</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1">make.py – Python script used by the SDK to build and install apps and check app status.</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1">NCOS_SDK_Application_Development_Guide.html</span></p>
<p class="p15"><span class="s2">·</span><span class="s3">       </span><span class="s1">NCOS_APIs_for_Applications.html</span></p>
<p class="p3"><span class="s1">Based on the sdk_setting.ini file, the make.py script builds all files located in the <i>app_name</i> directory into a <i>tar.gz</i> package that can then been installed into the device. This installation is performed either directly into the device (if in DEV mode) or via NCM for grouped devices.</span></p>
<p class="p4"><span class="s1"><b>Application Package Anatomy</b></span></p>
<p class="p3"><span class="s1">An NCOS application package, which is a <i>tar.gz</i> archive, consists of a set of files that includes the Python script, start/stop scripts, initialization files, along with manifest and signature files. This package of files is built by the SDK based on the sdk_settings.ini. Some of these files, like the manifest and signature files, are created by the make.py tool. Others are created by the application developer. Below are the example contents for a <i>tar.gz</i> archive created for a NCOS application. The <b>BOLD </b>items are modified or created by the developer. The other files are used by the SDK or are referenced by the other files.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>app_template_csclient</b> (directory)</span></p>
<p class="p18"><span class="s2">·</span><span class="s3">       </span><span class="s1">METADATA (directory)</span></p>
<p class="p19"><span class="s2">·</span><span class="s3">       </span><span class="s1">MANIFEST.json - Contains a file list along with hash signatures and other app the package initialization data.</span></p>
<p class="p19"><span class="s2">·</span><span class="s3">       </span><span class="s1">SIGNATURE.DS - A signature file for the app package.</span></p>
<p class="p20"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>app_template_csclient.py</b> - The application Python file.</span></p>
<p class="p20"><span class="s2">·</span><span class="s3">       </span><span class="s1">csclient.py - Python file containing the EventingCSClient() class, with methods for interacting with the NCOS API.</span></p>
<p class="p20"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>package.ini</b> – Package and app settings.</span></p>
<p class="p20"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>start.sh</b> - The script run when the app is started.</span></p>
<p class="p20"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>stop.sh</b> - The script run when the app is stopped. This is not required unless one needs a specific action preformed when the application is stopped.</span></p>
<p class="p3"><span class="s1"><b>csclient.py</b></span></p>
<p class="p3"><span class="s1">A python file containing the EventingCSClient() class with methods for interacting with the NCOS API.</span></p>
<p class="p3"><span class="s1">Import the class and instantiate it by passing the string name of your app as the only argument.  The app name is used to identify the app when writing logs or sending custom alerts.  In the below example, the EventingCSClient() class is instantiated as “cp” for simplified syntax:</span></p>
<p class="p21"><span class="s1"><i>from csclient import EventingCSClient</i></span></p>
<p class="p21"><span class="s1"><i>cp = EventingCSClient(‘app_template_csclient’)</i></span></p>
<p class="p3"><span class="s1">The EventingCSClient() class, now instantiated as cp, has the following methods for interacting with the NCOS API:</span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.log() </b><i>– writes an info level system log</i></span></p>
<p class="p3"><span class="s1">Accepts log text (string)</span></p>
<p class="p3"><span class="s1">Usage example:<span class="Apple-converted-space"> </span></span></p>
<p class="p23"><span class="s1"><b>cp.log(‘This is my log text!’)</b></span></p>
<p class="p24"><span class="s1"><i>01:43:33 PM INFO My_App This is my log text!</i></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.get() </b><i>– gets a value from the NCOS API</i></span></p>
<p class="p3"><span class="s1">Accepts NCOS Path (string)<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s1">Returns requested value (no need to specify “data” key)</span></p>
<p class="p3"><span class="s1">Usage example – get system ID and log it:</span></p>
<p class="p23"><span class="s1">system_id = <b>cp.get('config/system/system_id’)</b></span></p>
<p class="p23"><span class="s1">cp.log(system_id)</span></p>
<p class="p24"><span class="s1"><i>11:22:17 AM INFO my_app AER2200-AER</i></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.put() </b><i>– put a value to the NCOS API path</i></span></p>
<p class="p25"><span class="s12">·</span><span class="s3">       </span><span class="s1">Accepts a path (string) and payload (accepts JSON) and puts the payload in the path</span></p>
<p class="p25"><span class="s12">·</span><span class="s3">       </span><span class="s1">Usage example – set system ID:<span class="Apple-converted-space"> </span></span></p>
<p class="p26"><span class="s1"><b>cp.put(‘config/system/system_id’, ‘MyRouter’)</b></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.alert() </b><i>– Sends a custom NCM alert</i></span></p>
<p class="p3"><span class="s1">Accepts alert text (string)</span></p>
<p class="p3"><span class="s1">Usage example:<span class="Apple-converted-space"> </span></span></p>
<p class="p23"><span class="s1"><b>cp.alert(‘This is my alert text!’)</b></span></p>
<p class="p27"><span class="s1"><i>Cradlepoint NetCloud: Custom Alert</i></span></p>
<p class="p27"><span class="s1"><i>Alert Name         Custom Alert</i></span></p>
<p class="p27"><span class="s1"><i>Description         app_template_csclient This is my alert text!</i></span></p>
<p class="p27"><span class="s1"><i>MAC Address     00:30:44:36:57:B1</i></span></p>
<p class="p27"><span class="s1"><i>Device Name      TLAB 900</i></span></p>
<p class="p27"><span class="s1"><i>Group Name      <span class="Apple-converted-space"> </span></i></span></p>
<p class="p27"><span class="s1"><i>Timestamp         2020-02-14 15:10:12 MST</i></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.post() </b><i>– </i>create a new list item in the NCOS API</span></p>
<p class="p3"><span class="s1">Accepts a path (string) and payload (JSON) and creates a new list item.</span></p>
<p class="p3"><span class="s1">Usage example – add a user:<span class="Apple-converted-space"> </span></span></p>
<p class="p28"><span class="s1"><b>cp.post('config/system/users', {'username': ‘MyUser’, 'password': ‘MyPass’, 'group': 'admin'})</b></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.delete() </b>– delete a value from the NCOS API</span></p>
<p class="p3"><span class="s1">Accepts a path (string) to a value to delete</span></p>
<p class="p3"><span class="s1">Usage example – delete a LAN (default guestLAN):<span class="Apple-converted-space"> </span></span></p>
<p class="p24"><span class="s1"><b><i>cp.delete(‘config/lan/1’)</i></b></span></p>
<p class="p22"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>.register()</b> – register a function for callback on an API value change</span></p>
<p class="p3"><span class="s1">A callback is a “push” function where you tell NCOS to call your function when a specific API value changes.  The path and value are passed to your function to be handled as necessary.</span></p>
<p class="p3"><span class="s1"><b><i>Requires the following 3 positional arguments (action, path, function):</i></b></span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>action</b> or method (string) such as ‘put’</span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>path</b> to the value (string)</span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>function</b> to call – do not include parenthesis.  When the <b>path</b> receives the <b>action</b>, it will call your <b>function</b> and pass the <b>path</b> and <b>value</b> to it.</span></p>
<p class="p23"><span class="s1"> </span></p>
<p class="p3"><span class="s1">Usage example – call a function when the primary WAN device changes:<span class="Apple-converted-space"> </span></span></p>
<p class="p23"><span class="s1">def wan_change(path, value, *args):</span></p>
<p class="p23"><span class="s1">    cp.log(f'Primary WAN UID = {value}’)</span></p>
<p class="p23"><span class="s1">       <span class="Apple-converted-space"> </span></span></p>
<p class="p23"><span class="s1"><b>cp.register('put', '/device/wan/connection/primary', wan_change)</b></span></p>
<p class="p21"><span class="s1"><b>Your function must expect the following positional arguments (path, value, *args):</b></span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>Path</b> is the API path to the key, or field, that you registered for callback on.</span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>Value</b> is the current value of the key in the path</span></p>
<p class="p29"><span class="s12">·</span><span class="s3">       </span><span class="s1"><b>*args</b> contains dynamic arguments</span></p>
<p class="p23"><span class="s1"><b> </b></span></p>
<p class="p21"><span class="s1">return completes the function.</span></p>
<p class="p3"><span class="s1"> </span></p>
<p class="p6"><span class="s4"><b>package.ini</b></span><span class="s1"><br>
<br>
</span><span class="s4">This initialization file contains information and about the application and items that affect installation and execution. This information is shown in /status/system/sdk within the NCOS config store for installed apps.</span><span class="s1"><br>
<br>
</span><span class="s4">For example:</span></p>
<p class="p8"><span class="s1">[hello_world]</span></p>
<p class="p8"><span class="s1">uuid=7042c8fd-fe7a-4846-aed1-e3f8d6a1c91c</span></p>
<p class="p8"><span class="s1">vendor=Cradlepoint</span></p>
<p class="p8"><span class="s1">notes=Hello World Demo Application</span></p>
<p class="p8"><span class="s1">firmware_major=7</span></p>
<p class="p8"><span class="s1">firmware_minor=1</span></p>
<p class="p8"><span class="s1">auto_start=true</span></p>
<p class="p8"><span class="s1">restart=false</span></p>
<p class="p8"><span class="s1">reboot=true</span></p>
<p class="p8"><span class="s1">version_major=1</span></p>
<p class="p8"><span class="s1">version_minor=0</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>[hello_world]</b></span></p>
<p class="p13"><span class="s1">This must contain the name of the application. In this example, hello_world is the application name.</span></p>
<p class="p30"><span class="s2">·</span><span class="s1">       </span><span class="s8"><b>uuid</b></span></p>
<p class="p13"><span class="s1">Every app must contain a universally unique identifier (UUID). If left blank, the make.py “build” action will generate and populate UUID for the app.</span></p>
<p class="p30"><span class="s2">·</span><span class="s1">       </span><span class="s8"><b>vendor</b></span></p>
<p class="p13"><span class="s1">This is the vendor name for the app.</span></p>
<p class="p30"><span class="s2">·</span><span class="s1">       </span><span class="s8"><b>notes</b></span></p>
<p class="p13"><span class="s1">Add notes to describe the app or anything else.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>firmware_major </b>and <b>firmware_minor</b></span></p>
<p class="p13"><span class="s1">This is the version of NCOS that the app was orginially written to work with. Information only.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>auto_start</b></span></p>
<p class="p13"><span class="s1">If set to 'true', the app will automatically start after installation.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>restart </b></span></p>
<p class="p13"><span class="s1">If set to 'true', the application will be restarted if it dies or is not running. If false, the device will not attempt to restart the application.</span></p>
<p class="p30"><span class="s2">·</span><span class="s1">       </span><span class="s8"><b>reboot </b></span></p>
<p class="p13"><span class="s1">If set to 'true', the application will be started following a device reboot. Otherwise, it will not be restarted.</span></p>
<p class="p11"><span class="s2">·</span><span class="s3">       </span><span class="s1"><b>version_major </b>and <b>version_minor</b></span></p>
<p class="p13"><span class="s1">This contains the app version. This must be incremented for any new production app used installed via NCM. It will not re-install the same version that already exists in the device.</span></p>
<p class="p6"><span class="s1"><br>
</span><span class="s4"><b>start.sh</b></span><span class="s1"><br>
<br>
</span><span class="s4">This script is executed to start the application in the device. It contains the command to start the Python script and pass any arguments if needed.</span><span class="s1"><br>
</span><span class="s4">For example:</span></p>
<p class="p8"><span class="s1">#!/bin/bash</span></p>
<p class="p8"><span class="s1">cppython hello_world.py</span></p>
<p class="p6"><span class="s4"><b>stop.sh</b></span><span class="s1"><br>
<br>
</span><span class="s4">This script is executed when the application is stopped in the device. It contains the command to stop the Python script and pass any arguments. This is not required unless one needs a specific action preformed when the application is stopped.</span><span class="s1"><br>
</span><span class="s4">For example:</span></p>
<p class="p8"><span class="s1">#!/bin/bash</span></p>
<p class="p8"><span class="s1">cppython hello_world.py</span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p4"><span class="s1"><b>make.py</b></span></p>
<p class="p6"><span class="s1"><br>
</span><span class="s4">The SDK includes a Python make.py file that is compatible for Windows, Linux and OS X platforms.</span></p>
<p class="p3"><span class="s1"><b>make.py actions are:</b></span></p>
<p class="p3"><span class="s1"><b>default (i.e. no action given)</b>: Print a help file</span></p>
<p class="p3"><span class="s1"><b>clean</b>: Clean all project artifacts. To clean all the apps, add the option "all" (i.e. clean all).</span></p>
<p class="p3"><span class="s1"><b>build or package</b>: Create the app archive tar.gz file. To build all the apps, add the option "all" (i.e. build all). Any directory containing a package.ini file is considered an app.</span></p>
<p class="p3"><span class="s1"><b>status</b>: Fetch and print current app status from the locally connected device.</span></p>
<p class="p6"><span class="s4"><b>install</b>: Secure copy the app archive to a locally connected device. The device must already be in SDK DEV mode via registration and licensing in NCM.</span><span class="s1"><br>
<br>
</span><span class="s4"><i>Note: A 'Connection reset by peer' error displays even when the application is successfully copied to the device. This occurs when the device drops the connections after the file copy is complete.</i></span></p>
<p class="p3"><span class="s1"><b>start</b>: Start the app on the locally connected device.</span></p>
<p class="p3"><span class="s1"><b>stop</b>: Stop the app on the locally connected device.</span></p>
<p class="p3"><span class="s1"><b>uninstall</b>: Uninstall the app from the locally connected device.</span></p>
<p class="p3"><span class="s1"><b>purge</b>: Purge all apps from the locally connected device.</span></p>
<p class="p3"><span class="s1"><b>uuid</b>: This will create a new UUID for the app and write it to the package.ini file.</span></p>
<p class="p3"><span class="s1"><b>unit</b>: Run any unit tests associated with selected app.</span></p>
<p class="p3"><span class="s1"><b>system</b>: Run any system tests associated with selected app.</span></p>
<p class="p3"><span class="s1"><b>help</b>: Print the help information.</span></p>
<p class="p6"><span class="s1"><br>
</span><span class="s4"><b>make.py usage</b></span><span class="s1"><br>
<br>
</span><span class="s4">All SDK functions are contained in the make.py Python file. While this executable is the same regardless of the workstation platform, the Python command is not. Use the following Python command based on your platform:</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Linux or OS X:</span></p>
<p class="p31"><span class="s1">python3</span></p>
<p class="p5"><span class="s2">·</span><span class="s3">       </span><span class="s1">Windows:</span></p>
<p class="p31"><span class="s1">python</span></p>
<p class="p3"><span class="s1">The command structure is:</span></p>
<p class="p8"><span class="s1">python(3) make.py &lt;action&gt;</span></p>
<p class="p3"><span class="s1">The make.py usage is as follows:</span></p>
<p class="p5"><span class="s1">1.</span><span class="s3">     </span><span class="s1">Update the sdk_setting.ini file based on your needs.</span></p>
<p class="p13"><span class="s1">Example:</span></p>
<p class="p10"><span class="s1">[sdk]</span></p>
<p class="p10"><span class="s1">app_name=hello_world</span></p>
<p class="p10"><span class="s1">dev_client_ip=192.168.0.1</span></p>
<p class="p10"><span class="s1">dev_client_username=admin</span></p>
<p class="p10"><span class="s1">dev_client_password=44224267</span></p>
<p class="p11"><span class="s1">2.</span><span class="s3">     </span><span class="s1">Build the application package:</span></p>
<p class="p10"><span class="s1">python(3) make.py build</span></p>
<p class="p10"><span class="s1">Packaging hello_world</span></p>
<p class="p11"><span class="s1">3.</span><span class="s3">     </span><span class="s1">Test connectivity with your device via the status target:</span></p>
<p class="p10"><span class="s1">python(3) make.py status</span></p>
<p class="p10"><span class="s1"> </span></p>
<p class="p10"><span class="s1">{</span></p>
<p class="p10"><span class="s1">    "success": true,</span></p>
<p class="p10"><span class="s1">    "data": {</span></p>
<p class="p10"><span class="s1">        "service": "started",</span></p>
<p class="p10"><span class="s1">        "summary": "Service Started",</span></p>
<p class="p10"><span class="s1">        "mode": "devmode",</span></p>
<p class="p10"><span class="s1">        "apps": []</span></p>
<p class="p10"><span class="s1">    }</span></p>
<p class="p10"><span class="s1">}</span></p>
<p class="p11"><span class="s1">4.</span><span class="s3">     </span><span class="s1">Install the application on your device:</span></p>
<p class="p10"><span class="s1">python(3) make.py install</span></p>
<p class="p10"><span class="s1"> </span></p>
<p class="p10"><span class="s1">Installing hello_world.tar.gz in NCOS device 192.168.0.1.</span></p>
<p class="p10"><span class="s1">Warning: Permanently added '192.168.0.1' (RSA) to the list of known hosts.</span></p>
<p class="p10"><span class="s1">Received disconnect from 192.168.0.1 port 22:11: Bye Bye</span></p>
<p class="p10"><span class="s1">Disconnected from 192.168.0.1 port 22</span></p>
<p class="p10"><span class="s1">lost connection</span></p>
<p class="p11"><span class="s1">5.</span><span class="s3">     </span><span class="s1">Get the application execution status from your device:</span></p>
<p class="p10"><span class="s1">python(3) make.py status</span></p>
<p class="p10"><span class="s1"> </span></p>
<p class="p10"><span class="s1">{</span></p>
<p class="p10"><span class="s1">    "success": true,</span></p>
<p class="p10"><span class="s1">    "data": {</span></p>
<p class="p10"><span class="s1">        "service": "started",</span></p>
<p class="p10"><span class="s1">        "summary": "Service Started",</span></p>
<p class="p10"><span class="s1">        "mode": "devmode",</span></p>
<p class="p10"><span class="s1">        "apps": [</span></p>
<p class="p10"><span class="s1">            {</span></p>
<p class="p10"><span class="s1">                "_id_": "8a7f79cb-b11b-44bc-bd33-0f4ab3f06d60",</span></p>
<p class="p10"><span class="s1">                "app": {</span></p>
<p class="p10"><span class="s1">                    "uuid": "8a7f79cb-b11b-44bc-bd33-0f4ab3f06d60",</span></p>
<p class="p10"><span class="s1">                    "name": "hello_world",</span></p>
<p class="p10"><span class="s1">                    "date": "2020-03-09T14:15:24.936508",</span></p>
<p class="p10"><span class="s1">                    "restart": true,</span></p>
<p class="p10"><span class="s1">                    "reboot": true,</span></p>
<p class="p10"><span class="s1">                    "auto_start": true,</span></p>
<p class="p10"><span class="s1">                    "vendor": "Cradlepoint",</span></p>
<p class="p10"><span class="s1">                    "version_major": 0,</span></p>
<p class="p10"><span class="s1">                    "version_minor": 1</span></p>
<p class="p10"><span class="s1">                },</span></p>
<p class="p10"><span class="s1">                "state": "started",</span></p>
<p class="p10"><span class="s1">                "summary": "Started Application"</span></p>
<p class="p10"><span class="s1">            }</span></p>
<p class="p10"><span class="s1">        ]</span></p>
<p class="p10"><span class="s1">    }</span></p>
<p class="p10"><span class="s1">}</span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p4"><span class="s1"><b>NCOS Syslog for Debugging</b></span></p>
<p class="p6"><span class="s4">Application debugging is accomplished with the use of system logs. You can also view logs via CLI commands when logged into the NCOS device console. This console is available by logging into the device with SSH or by opening a console from the device admin pages.</span><span class="s1"><br>
<br>
</span><span class="s4">Use the following steps to open the device console from the device admin pages:</span></p>
<p class="p5"><span class="s1">1.</span><span class="s3">     </span><span class="s1">Click <b>System</b>. </span></p>
<p class="p5"><span class="s1">2.</span><span class="s3">     </span><span class="s1">Click <b>System Control</b>.</span></p>
<p class="p5"><span class="s1">3.</span><span class="s3">     </span><span class="s1">Click <b>Device Options</b>.</span></p>
<p class="p5"><span class="s1">4.</span><span class="s3">     </span><span class="s1">Click the <b>Device Console</b> button.</span></p>
<p class="p10"><span class="s1">log (displays logs in the terminal window)</span></p>
<p class="p10"><span class="s1">log -f (continuously displays log entries as they are written)</span></p>
<p class="p10"><span class="s1">log -s &lt;text&gt; (search for logs that contain &lt;text&gt; and displays them)</span></p>
<p class="p10"><span class="s1">log -s -i &lt;text&gt; (search for logs that contain &lt;text&gt; but case insensitive)</span></p>
<p class="p10"><span class="s1">log clear (clears the log buffer)</span></p>
<p class="p10"><span class="s1">help log (display the log command options)</span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p8"><span class="s1"> </span></p>
<p class="p4"><span class="s1"><b>NCOS Development Mode</b></span></p>
<p class="p3"><span class="s1">To install an application directly to the device without using NCM, the NCOS device must be placed in <b>DEV </b>mode. One would typically debug and test an application using <b>DEV </b>mode prior to using NCM for installation. <b>DEV </b>mode allows for quicker and easier testing and debugging. Instructions for setting up an NCOS device for <b>DEV </b>mode are in the article <a href="http://dev.cradlepoint.com/s/article/NCOS-sdk-enable-development-mode?r=95&amp;ui-knowledge-components-aura-actions.KnowledgeArticleVersionCreateDraftFromOnlineAction.createDraftFromOnlineArticle=1&amp;ui-force-components-controllers-recordGlobalValueProvider.RecordGvp.getRecord=1"><span class="s7">NCOS: SDK Enable Developer Mode</span></a>.</span></p>
<p class="p4"><span class="s1"><b>NCM Application Deployment</b></span></p>
<p class="p6"><span class="s4">NCM is used to securely deploy applications to devices at the group level. If an application tar.gz package is uploaded to NCM and then assigned to an NCOS device group, NCM securely downloads and installs the application to the devices within the group. For security, the application files are not user accessible within NCM or devices. That is, one is not able to download the application from the device or NCM.</span><span class="s1"><br>
</span><span class="s4"> </span></p>
<p class="p2"><span class="s1"><b>Related Articles/Links</b></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="http://github.com/cradlepoint/sdk-samples/releases"><span class="s7"><i>Cradlepoint SDK GitHub repository</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="https://github.com/cradlepoint/sdk-samples"><span class="s7"><i>SDK and Sample Applications</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="http://dev.cradlepoint.com/"><span class="s7"><i>Cradlepoint Developer Community Portal</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="http://customer.cradlepoint.com/s/"><span class="s7"><i>Cradlepoint Customer Community</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="https://customer.cradlepoint.com/s/article/NCM-APIv2-Overview"><span class="s7"><i>Cradlepoint Developer/API Site</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="https://www.jetbrains.com/pycharm/download/#section=linux"><span class="s7"><i>Pycharm for Linux</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="https://www.jetbrains.com/pycharm/download/#section=macOS"><span class="s7"><i>Pycharm for OS X</i></span></a></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="https://www.jetbrains.com/pycharm/download/#section=windows"><span class="s7"><i>Pycharm for Windows</i></span></a></span></p>
<p class="p9"><span class="s2">·</span><span class="s1">       <a href="http://www.7-zip.org/"><span class="s7"><i>7-zip</i></span></a></span><span class="s8"><i> </i></span></p>
<p class="p14"><span class="s10">·</span><span class="s11">       <a href="http://markdownpad.com/"><span class="s7"><i>MarkdownPad</i></span></a></span></p>
<p class="p32"><span class="s1"> </span></p>
</body>
</html>
